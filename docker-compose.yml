services:
  astraforge:
    build: .
    container_name: astraforge-ide
    ports:
      - "3000:3000"
    extra_hosts:
      - "host.docker.internal:host-gateway"  # Allows container to reach host's Ollama at host.docker.internal:11434
    environment:
      - NODE_ENV=production
      - OPENAI_API_KEY={OPENAI_API_KEY}
    volumes:
      - ./astra_data:/app/data
